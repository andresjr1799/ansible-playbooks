---
- name: Enviar archivos por rsync
  hosts: all
  gather_facts: yes
  become: yes
  tasks:
    - name: Enviar archivos mediante rsync
      ansible.posix.synchronize:
        src: "{{ item }}"
        dest: "/opt/backups_ventana/{{ ansible_hostname }}/{{ folder_destino }}"
        remote_src: no
        archive: yes
        compress: yes
      with_items:
        - "{{ file1 }}"
        - "{{ file2 }}"
        - "{{ file3 }}"
      delegate_to: "{{ ip_backup }}"
      vars:
        ansible_user: root
        ansible_password: linuxlandia32
        ansible_become: yes
        ansible_become_password: linuxlandia32
      when: item | length > 0
